<h2>Phrase en cours</h2>

<section>
    <div class="bloc-current-phrase">
        <button mat-raised-button (click)="setPhrase(null)">Cr√©er une phrase</button>
    </div>

</section>
<mat-divider></mat-divider>

<section>
    <div class="bloc-current-phrase">
        <div *ngIf="idPhrase ==='' ;else elseBlock">Ou compl√©ter une phrase ü¢É</div>

        <ng-template #elseBlock>
            <button style="float: right;" title="Rafraichir la phrase s√©lectionn√©e" (click)="refresh()">
        <mat-icon mattooltip="Rafra√Æchir" aria-label="Rafra√Æchir" color="currentColor">refresh</mat-icon>
      </button>
            <div *ngIf="idPhrase != null ; else elseBlockNew ">
                <div>Identifiant de la phrase s√©lectionn√©e : <span class="is-phrase-selected">{{idPhrase}}</span></div>
            </div>
            <ng-template #elseBlockNew>
                <div>Nouvelle phrase :</div>
            </ng-template>

            <div *ngIf="stepWord !== '' ; else elseBlockFinish ">
                <form [formGroup]="wordForm">
                    Entrer un
                    <span class="enterword "> {{stepWord}}</span> :

                    <div *ngIf="stepWord=='Compl√©ment d\'objet circonstantiel'" class="hide">Exemple : Le chat mange la souris
                        <strong>en tombant</strong></div>
                    <div *ngIf="stepWord == 'Compl√©ment d\'objet direct' " class="hide ">Exemple : Le chat mange <strong>la
              souris</strong> en tombant</div>
                    <div *ngIf="stepWord=='Sujet' " class="hide ">Exemple : <strong>Le chat</strong> mange la souris en tombant
                    </div>
                    <div *ngIf="stepWord=='Verbe' " class="hide ">Exemple : Le chat <strong>mange</strong> la souris en tombant
                    </div>
                    <input type="text" formControlName="wordinput">
                    <button [disabled]="!userAuthorizedToEditCurrentPhrase" class="cadavre-button" mat-raised-button (click)="validateCurrentWord()" type="submit">Saisir</button>
                    <div *ngIf="wordForm.invalid && wordinputControl?.touched && wordinputControl.errors">
                        <span *ngIf="wordinputControl.errors['maxlength']">Le mot doit avoir 100 caract√®res maximum</span>
                        <span *ngIf="wordinputControl.errors['pattern']">Seuls les caract√®res alpha-num√©riques sont autoris√©s</span>
                    </div>
                </form>
            </div>
            <ng-template #elseBlockFinish>
                <div><strong>Phrase compl√®te ! </strong></div>
            </ng-template>
            <!-- <div *ngIf="stepWord !== '' ; else elseBlockFinish "> -->
            <div *ngIf="!userAuthorizedToEditCurrentPhrase; ">
                <div *ngIf="!userConnected">
                    <strong>Vous n'√™tes pas autoris√© √† compl√©ter cette phrase car vous n'√™tes pas connect√©</strong>
                </div>
                <div *ngIf="userConnected">
                    <strong>Vous n'√™tes pas autoris√© √† compl√©ter cette phrase √† cette √©tape, car vous √™tes l'auteur du dernier mot
                        entr√©</strong>
                </div>
            </div>
        </ng-template>
    </div>
</section>